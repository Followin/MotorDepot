(function(){var n;$("body").on("click",".voyage-request",function(n){var t,i;if(t=$(n.target),!t.is(".success"))return t.addClass("waiting"),i=t.data("voyage-id"),$.ajax({type:"GET",url:"/Voyage/RequestVoyage?voyageId="+i,success:function(n){if(n!=="")return n===!0?(t.removeClass("waiting error").addClass("success"),t.html("Заявка подана")):(t.removeClass("waiting").addClass("error"),t.html("На данный момент, вы не можете подать заявку на данный рейс"))}})});$("body").on("click",".to-requests-button",function(n){var i,r,t,u;return t=$(n.target).closest(".paper-block"),u=t.find("[name='voyageId']").val(),i=$("<div class='flip-container'><\/div>"),r=$("<div class='paper-block flip-side'><\/div>"),r.height(t.height()),$.ajax({type:"GET",url:"/Voyage/RequestsForVoyage?voyageId="+u,success:function(n){if(n!=="")return r.append(n)}}),i.insertBefore(t),i.append(t).append(r),i.addClass("flipped")});n=function(n){var i,t;return i=$(n.target).closest(".flip-side"),t=i.parent(),t.removeClass("flipped"),setTimeout(function(){var n;return n=t.find(".voyage-info"),n.insertBefore(t),t.remove()},1600)};$("body").on("click",".accept-request-button",function(t){var i,r,u,e,o,f;return r=$(t.target).closest(".paper-block"),u=r.parent(),e=u.find(".voyage-info"),f=u.find(".voyage-info input[name='voyageId']").val(),o=r.find(".form-group input[type='radio']"),i=o.filter(":checked"),i.length>0?$.ajax({type:"GET",url:"/Voyage/AcceptRequest?voyageId="+f+"&driverId="+i.val(),success:function(i){if(i===!0)return $.ajax({type:"GET",url:"/Voyage/Details?voyageId="+f,success:function(i){return e.empty().append(i),n(t)}})}}):void 0});$("body").on("click",".back-to-voyage",n);$("body").on("change",".order-select, .status-filter",function(){var n,t,i;return t=$(".order-select").val(),i=$(".status-filter").val(),n=$(this).closest(".filters-block").data("action"),$.ajax({type:"GET",url:"/Voyage/"+n+"?sortOrder="+t+"&status="+i,success:function(n){return $(".voyages-list").empty().append(n)}})})}).call(this);
//# sourceMappingURL=voyages.min.js.map
